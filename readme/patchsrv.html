<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
   <title>Freya Ragnarok Online Emulator</title>
   <meta http-equiv="Content-Type" content="text/html; charset=charset=UTF-8" />
   <meta http-equiv="content-style-type" content="text/css">
   <meta name="Author" content="Freya Development Team">
   <meta name="Publisher" content="Freya Development Team">
   <meta name="Copyright" content="COPYRIGHT Freya Under GPL License">
   <meta name="OWNER" content="Freya">
   <link rel="stylesheet" type="text/css" href="include/style.css" />
</head>

<body>
<table border="0" cellpadding="0" cellspacing="3">
<tr>
<td width="100" class="content" valign="top"><br />
<a class="left" href="http://freya.dns.st/forum/index.php?act=idx" target="_top">
<b>HOME</b></a>
<br /><br />
<a class="left" target="_top" href="index.html" >Introduction</a><br />
<a class="left" target="_top" href="chngs.html" >Changes</a><br />
<a class="left" target="_top" href="feats.html" >Code Features</a><br />
<a class="left" target="_top" href="npcfeats.html" >Area Features</a><br />
<a class="left" target="_top" href="setup.html" >Setup</a><br />
<a class="left" target="_top" href="gmcmds.html" >GM Commands</a><br />
<a class="left" target="_top" href="faq.html" >FAQ</a><br />
<a class="left" target="_top" href="support.html" >Support</a><br />
<a class="left" target="_top" href="router.html">Router guide</a><br />
<a class="left" target="_top" href="creategrf.html" >Create GRFs</a><br />
<a class="left" target="_top" href="patchsrv.html" style='font-weight:bold;color:#000000;background-color:transparent;' >Patch server guide</a><br />
<img src="include/pixel.gif" width="137" height="1" alt="" />
</td>
<td width="700" valign="top">
<table width="100%" bgcolor="#FFFFFF" border="1" cellpadding="5" cellspacing="0">
<tr>
<td>

<h1>Patch server guide</h1>
<a href="creategrf.html">Previous</a>
<a href="http://freya.dns.st/forum/index.php?act=idx">Next</a>
<hr />

<p><h2 class="header">The Big Ol' Patch Server Guide<br />
by Jodaho</h2></p>

In this guide I'm going to explain how to set up two different patch servers.
One with RoLoader20b, one with Neoncube.
If you only have a free host, and don't want to pay for FTP, I'd suggest Neoncube, as you can do that with a free host, but you have to pay for RoLoaders FTP.</p>

<p><h4>How to Patch Server with RO Loader20b</h4></p>
<p>I've noticed Ne0's guide to patching a server has become a bit outdated so I thought I'd share a new guide, to do it with the latest RO Loader.</p>

<p><b>Things you'll need</b>:<br />
-1 FTP Server<br />
-1 HTTP Server</p>

<p>I'm sorry but I'm not going to help with HTTP and FTP server setup in this guide, I'd just suggest a webhost.</p>

<p>1. Download RO Loader20b with one of these mirrors: [Currently only one]</p>

<p>email2me's mirror:<br />
<a href="http://www.asialinks.biz/freya/RoLoader20b.zip">http://www.asialinks.biz/freya/RoLoader20b.zip</a></p>


<p>2. Extract it with <a href="http://www.rarlabs.com">WinRAR</a></p>

<p>3. Go into the directory it made, and open the Configuration Settings file called RoLoader20b. Not the .exe, the one you can open with Notepad. Don't edit anything in it quite yet.</p>

<p>4. Open Notepad and make a new file. In it just write one word. "allow" (Without the "'s)</p>

<p>5. Save it as a .txt and call it patch_allow.</p>

<p>6. Once again open up Notepad, this time, write the message you want displayed when people open the patcher (Ex. it would be common to see something such as Nov 22, 05/ Just added the new wing sprites) 
Save it and make it called Sakray.html</p>

<p>7. Open Notepad again, this time don't write anything in it, and just save it as patch2.txt</p>

<p>8. Open Notepad and don't write anything in it, just save it as ServerClose.html</p>

<p>9. Head into your HTTP servers public_html or htdocs directory, or whatever your public files directory is called. Make a directory called patch2</p>

<p>10. In that directory upload Sakray.html, patch2.txt, patch_allow.txt, and ServerClose.html.</p>

<p>11. Anyways, back to the text file you should still have opened. On the first line it should say:</p>
<p><span style='color:green'>;HTTP DOMAIN & PATH -&gt; Where patch_allow_file and patch_list_file are stored<br />
;HTTP DOMAIN<br />
http_domain = webpatch.ragnarok.co.kr</span></p>

<p>Where it says http_domain =, erase webpatch.ragnarok.co.kr, and put your HTTP server domain, with NO http:// or www. (Ex. if your domain was <span style='color:red'>http://www.patchclient.servername.com</span>, you'd only write patchclient.servername.com).</p>

<p>12. Keep this line the way it is:</p>
<p><span style='color:green'>;HTTP PATH<br />
http_path = /patch2</span></p>

<p>13. On the line:</p>
<p><span style='color:green'>;FTP DOMAIN & PATH -&gt; Where patch files are stored<br />
;FTP DOMAIN<br />
ftp_domain = ragnarok.nefficient.co.kr</span></p>
<p>Erase ragnarok.nefficient.co.kr from ftp_domain =, and write your servers FTP domain. (Without the FTP:// though, for example it wouldn't be <span style='color:red'>ftp://ftp.servername.com</span> it would just be ftp.servername.com) Now, erase the both of the ;'s before FTP DOMAIN & PATH and FTP DOMAIN.</p>

<p>14. Save the changes you've made for now but don't exit the file just yet. Go into your public FTP folder, and make a folder called "patch" (Without the "'s)

<p>15. Go back to the Configuration document. The next line will be</p>
<p><span style='color:green'>;FTP PATH<br />
ftp_path = /pub/ragnarok/Patch</span></p>

<p>Change /pub/ragnarok/patch to "/patch" (Without the "'s)</p>

<p>16. On the next line it will say:</p>
<p><span style='color:green'>// FTP username & password; leave empty or comment out for anonymous login<br />
;ftp_username =<br />
<br />
;ftp_password =</span></p>
<p>If you have anonymous access to your FTP server, leave it blank, otherwise write the account and username that has access to it.</p>

<p>17. Next line:</p>
<p><span style='color:green'>;Name of the .inf file for storing patch number<br />
patch_inf_file = spatch.inf</span></p>

<p>Leave that one alone</p>

<p>18. I'm going to assume that you already have a .GRF for your server that you want to patch. So on the line:</p>
<p><span style='color:green'>;Name of the .grf file you will be patching (MUST already exist!)<br />
grf_file = sdata.grf</span></p>
<p>Replace sdata.grf with your servers .GRF (Ex. yourservernamehere.grf)</p>

<p>19. Next Line:</p>
<p><span style='color:green'>;Your exe name, followed by 1rag1<br />
ragexe_call = sakexe.exe 1rag1 1sak1</span></p>

<p>Erase sakexe.exe 1rag1 1sak1 and write the client you use for your server 
(The one you want to launch after its done patching when you click Start Game, ex. servernamehere.exe) And after you write the name and the .exe, just write 1rag1 (Ex. servernamehere.exe 1rag1)</p>

<p>20.Next Line:</p>
<p><span style='color:green'>;The background music file; leave empty for no music<br />
bgm_file = ./BGM/50.mp3</span></p>

<p>Select the music you want to play in the background while patching. The music should be in your BGM folder in your RO folder. Leave empty for no music</p>

<p>21. Next Line:</p>
<p><span style='color:green'>;HTTP SERVER with .html files (where patch_notice_file and patch_close_file are stored)<br />
http_html = http://www.ragnarok.co.kr/gamenotice/</span></p>

<p>This is where you write your full domain name, and the path, with the <span style='color:red'>http://www</span>. 
So if your site was <span style='color:red'>http://www.patchclient.servername.com</span> you'd add /patch2 onto the end so you'd write your domain as <span style='color:red'>http://www.patchclient.servername.com/patch2/</span></p>

<p>22. Leave all these lines alone:</p>
<p><span style='color:green'>;Patch notice file<br />
patch_notice_file = Sakray.html<br />
<br />
;Patch list text file<br />
patch_list_file = patch2.txt<br />
<br />
;<br />
patch_allow_file = patch_allow.txt<br />
<br />
;<br />
patch_close_file = ServerClose.html</span></p>

<p>23. Leave these lines alone:</p>
<p><span style='color:green'>;"Tool Tip" for bottom left button.<br />
tip_bottom_left = Start<br />
<br />
;"Tool Tip" for bottom middle button.<br />
tip_bottom_middle = Home</span></p>

<p>24. On the line:</p>
<p><span style='color:green'>;URL for bottom middle button.<br />
url_bottom_middle = http://forum.asb-sakray.net/</span></p>
<p>Replace <span style='color:red'>http://forum.asb-sakray.net</span> with your servers Home Page or the link you want to send people to when they click the Home button.</p>

<p>25. Leave these two lines alone:</p>
<p><span style='color:green'>;"Tool Tip" for bottom right button.<br />
tip_bottom_right = Exit<br />
<br />
<br />
;"Tool Tip" for top right top button.<br />
tip_top_top = Beginner</span></p>

<p>26. On the line:</p>
<p><span style='color:green'>;URL for top right top button.<br />
url_top_top = http://guide.ragnarok.co.kr/StartAbout.asp</span></p>
<p>Replace <span style='color:red'>http://guide.ragnarok.co.kr/StartAbout.asp</span> with the link you want to send players to when they click the Beginners button.</p>

<p>27. Leave this line alone:</p>
<p><span style='color:green'>;"Tool Tip" for top right middle button.<br />
tip_top_middle = Support</span></p>

<p>28. On the line:</p>
<p><span style='color:green'>;URL for top right middle button.<br />
url_top_middle = http://forum.asb-sakray.net/</span></p>
<p>Replace <span style='color:red'>http://forum.asb-sakray.net/</span> with the link you want to send players to when they click the Support button.</p>

<p>29. Leave this line alone:</p>
<p><span style='color:green'>;"Tool Tip" for top right bottom button.<br />
tip_top_bottom = GMs</span></p>

<p>30. On the line:</p>
<p><span style='color:green'>;URL for top right bottom button.<br />
url_top_bottom = http://community.ragnarok.co.kr/gmaction.asp?mCode=5</span></p>

Replace <span style='color:red'>http://community.ragnarok.co.kr/gmaction.asp?mCode=5</span> with the link you want to send players to when they click the GMs button.</p>

<p>31. Save the file.</p>

<p>32. You'll probably want to change RoLoader20b.exe to a better name for your server such as servernameherepatcher.exe. If you want to do that you'll have to change the name of RoLoader20b Configuration Settings to servernameherepatcher.</p>

<p>33. Now just include the RoLoader20b.exe, mpglib.dll,  pclient20b.dll, and the RoLoader20b Configuration Settings in with your patch and you're ready to go.</p>

<p>Adding Patches:</p>
<p>I'm not going to go over how to make .GPFs and .RGZs but heres how to give updates to the players.</p>

<p>1. Put the .GPF or .RGZ file you want your players to have in your FTP patch directory<br />
2. Open patch2.txt and write a number like 1000.<br />
3. Make a space after 1000 and write the name of the .GPF or .RGZ you just added to your FTP domain.<br />
4. Every update after that will be 1001, 1002, etc, each on a new line</p>

<p>Hope you enjoyed this, it took a lot of time.</p>


<p><h4>How to: Patch Server with NeonCube</h4></p>

<p>First off you're probably wondering, what is NeonCube?
NeonCube is a patch client created by Cliffe, that is probably what your server needs, if you don't want to spend a lot of money on a host.
See, the difference with NeonCube is that the patch files you upload go to an HTTP server, which can be free, while with RoLoader they went to an FTP, which you need to pay for.</p>

<p><b>Things you'll need</b>:<br />
-1 HTTP webhost (Find a free one on the net)</p>

<p>Before we start, make a file called notice.html with NotePad.
On that file write whatever you want to be displayed when people open your patcher (Ex. Welcome to the YournamehereRO Patcher!)
Then make a file called patchlist.txt with notePad.
Upload notice.html on your webhost Go to your HTTP servers file manager, and in the public files folder, make a directory (folder) called patch.
Then, inside that directory, make a directory called files. Go back to the patch directory and upload the patchlist.txt file you just made there.
You can now continue with the guide.</p>

<p>1. Download Neon Cube 1.1  here:<br />
<a href="http://openkore.sf.net/neoncube/index.php?page=download">http://openkore.sf.net/neoncube/index.php?page=download</a></p>

<p>2. Extract it and go to the folder it made. In that folder will be another folder called neoncube. Enter the neoncube folder and open neocube.ini with Notepad.

<p>3. You can ignore most of the top text if you want, and go right down to the line that reads:</p>
<p><span style='color:green'>[server]<br />
server_name= Your Server Name<br />
<br />
notice_url = yourserver.com/yournotice.php<br />
<br />
patch_site = yourserver.com<br />
<br />
patch_list = /path/to/your/patchlist.txt<br />
<br />
executable = ragnarok.exe<br />
<br />
patch_folder = /path/to/your/files_folder/<br />
<br />
registration_link = http://ragnarok.co.kr<br />
<br />
skin = skin_default<br />
<br />
grf_file = adata.grf<br />
<br />
Backup_GRF= 1<br />
<br />
startup_option = 3</span></p>

<p>4. On this line:</p>
<p><span style='color:green'>server_name= Your Server Name</span></p>
<p>Replace <span style='color:red'>Your Server Name</span> with the name you want to display as the title when people open the patcher.</p>

<p>5. On this line:</p>
<p><span style='color:green'>notice_url = yourserver.com/yournotice.php</span></p>
<p>Replace <span style='color:red'>yourserver.com/yournotice.php</span> with 'yourdomainnamehere.com'/notice.html. Replace 'yourdomainnamehere' with your HTTP servers address, and then just add notice.html on the end (Assuming you uploaded the file before we started like I said to do.</p>

<p>6. On this line:</p>
<p><span style='color:green'>patch_site = yourserver.com</span></p>
<p>Replace <span style='color:red'>yourserver.com</span> with your domain name, not the paths to the files, so jodaho.5gigs.com would be good, but jodaho.5gigs.com/patch wouldn't.</p>

<p>7. On this line:</p>
<p><span style='color:green'>patch_list = /path/to/your/patchlist.txt</span></p>
<p>Replace <span style='color:red'>/path/to/your/patchlist.txt</span> with /patch/</p>

<p>8. On this line:</p>
<p><span style='color:green'>executable = ragnarok.exe</span></p>
<p>Replace <span style='color:red'>ragnarok.exe</span> with the name of your client you want to run when people click Start Game after the patching (Ex. Yourservernamehereclient.exe)</p>

<p>9. On this line:</p>
<p><span style='color:green'>patch_folder = /path/to/your/files_folder/</span></p>
<p>Replace <span style='color:red'>/path/to/your/files_folder/</span> with /patch/files/</p>

<p>10. On this line:</p>
<p><span style='color:green'>registration_link = http://ragnarok.co.kr</span></p>
<p>Replace <span style='color:red'>http://ragnarok.co.kr</span> with the link you want to pop up when people press the Register button. (This is usually the link to the registration page to your server if running on SQL)</p>

<p>11. On this line:</p>
<p><span style='color:green'>skin = skin_default</span></p>
<p>Write which skin you want. The two to start with are skin_default or skin_red. You can view both of them in your neoncube folder in the skin_default and skin_red folder.  Its possible to make your own skin but I'm not going to get into that.</p>

<p>12. On this line:</p>
<p><span style='color:green'>grf_file = adata.grf</span></p>
<p>Write the name of your servers .GRF (Yes this patcher is for those running on a .GRF not a data folder). An example of it would be Servernamehere.grf. This is the GRF the patcher will be updating.</p>

<p>13. On this line:</p>
<p><span style='color:green'>Backup_GRF= 1</span></p>
<p>If you keep it the same it will backup the GRF file before applying the patch, if you change the 1 to 0 it will disable it.</p>

<p>*Extra Step Added for Version 1.1*</p>
<p>The line</p>
<p><span style='color:green'>startup_option = 3</span></p>

<p>You can change the 3 to 1 if you want to be able to start the ragnarok client anytime.
(patcher is still downloading files, patcher failed to connect, patcher failed to extract, etc).
You can change the 3 to 2   if you want to be able to start the ragnarok client only AFTER the patch process has completed (if it fails to connect/download a patch, it won't start).
And finally, you can keep it at 3 if you want to be able to start the ragnarok client only AFTER the patch process has completed (if it fails to connect/download a patch. it WILL start). Recommended.</p>

<p>14. To make your patches use this format:</p>
<p><span style='color:green'>//this will extract patchname.gpf to the data folder<br />
123   FLD   patchname.gpf<br />
<br />
//here, patchname2.gpf will be repacked with grf_file<br />
456  GRF   patchname2.gpf<br />
<br />
//You can also delete files from the data folder.<br />
678   FLD   data\filenametodelete.xml*<br />
<br />
//Deleting files inside a GRF archive is still supported<br />
910   GRF  data\i_will_delete_you.txt*<br />
<br />
//if you prefer not using data folder, then just don't have a patch with FLD flag.</span></p>

<p>Example, if you wanted to use a data folder for your server and wanted to update the folder with a GPF (we'll say its called test.gpf) you'd write</p>
<p><span style='color:green'>123 FLD test.gpf</span></p>

<p>You'd then put test.gpf in the /patch/files/ directory. Then for every patch you'd write after it, you'd raise the number (Ex. the next would be 124, then 125)</p>

<p>Example, if you wanted to use a .GRF for your server, and wanted to repack it with a GPF you'd write something like</p>
<p><span style='color:green'>456  GRF   test.gpf</span></p>

<p>You'd then put test.gpf in the /patch/files/ directory.  Then for every patch you'd write after it, you'd raise the number (Ex. the next would be 457, then 458)</p>

<p>Example, if you were using a data folder and wanted to delete files from a data folder, you'd write something like</p>
<p><span style='color:green'>678   FLD   data\filenametodelete.xml*</span></p>

<p>You'd replace filenametodelete.xml* with whatever file you wanted deleted, then a * after it. Then for every patch you'd write after it, you'd raise the number (Ex. the next would be 679, then 680).</p>

<p>Example, if you wanted to delete a file inside of a .GRF archive you'd write something like</p>
<p><span style='color:green'>910   GRF  data\i_will_delete_you.txt*</span></p>

<p>You'd then replace i_will_delete_you.txt* with whatever filename you wanted deleted inside the .GRF, then with a * after it.
Then for every patch you'd write after it, you'd raise the number (Ex. the next would be 911, then 912).</p>

<p>Hope you enjoyed this guide.</p>

<p>-Jodaho</p>

</td>
</tr>
</table>
</td>
</body>
</html>